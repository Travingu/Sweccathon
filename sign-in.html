<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LOCKEDIN â€“ Sign In</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="navbar">
    <a class="logo" href="index.html">LOCKEDIN</a>
    <nav class="menu">
      <a href="submit-report.html" class="nav-item">Submit Report</a>
      <a href="browse-report.html" class="nav-item">Browse Reports</a>
      <div id="auth-control"></div>
    </nav>
  </header>

  <main class="container auth-section">
    <h1>Sign In</h1>
    <p>Use your Google account to sign in and unlock features.</p>
    <!-- Give the button a clear ID -->
    <button id="body-google-signin" class="btn">
      Sign in with Google
    </button>
  </main>

  <!-- 1) Navbar sign-in/out toggle -->
  <script type="module" src="./auth-control.js"></script>

  <!-- 2) Standalone body button wiring + redirect -->
  <script type="module">
    import { signInWithGoogle, onAuthStateChangedHelper }
      from './firebase/firebase.js';

    // Wire your standalone button
    const bodyBtn = document.getElementById('body-google-signin');
    bodyBtn.addEventListener('click', signInWithGoogle);

    // As soon as Firebase reports you're signed in, go to Submit Report
    onAuthStateChangedHelper(user => {
      if (user) {
        window.location.href = 'submit-report.html';
      }
    });
  </script>
</body>
</html>

