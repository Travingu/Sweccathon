<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LOCKEDIN â€“ Submit Report</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="navbar">
    <a class="logo" href="index.html">LOCKEDIN</a>
    <nav class="menu">
      <a href="submit-report.html" class="nav-item active">Submit Report</a>
      <a href="browse-report.html" class="nav-item">Browse Reports</a>
      <div id="auth-control"></div>
    </nav>
  </header>

  <main class="container submit-section">
    <h1>Submit Your Interview Report</h1>
    <form id="report-form">
      <label for="company">Company Name</label>
      <input type="text" id="company" name="company"
             placeholder="e.g. Acme Corp" required />

      <label for="rounds">Number of Rounds</label>
      <input type="number" id="rounds" name="rounds"
             min="1" required />

      <label for="questions">Questions (one per line)</label>
      <textarea id="questions" name="questions" rows="5"
        placeholder="Tell me about yourself\nReverse a linked list"
        required></textarea>

      <button type="submit" class="submit-button">Submit Report</button>
    </form>
  </main>

  <!-- Navbar auth toggle -->
  <script type="module" src="./auth-control.js"></script>

  <!-- Auth guard + form stub -->
  <script type="module">
    import { auth, onAuthStateChangedHelper } from './firebase/firebase.js';

    // 1) If not signed in, send to sign-in page
    onAuthStateChangedHelper(user => {
      if (!user) {
        window.location.href = 'sign-in.html';
      }
    });

    // 2) Stub submission (wire up Firestore here later)
    document.getElementById('report-form')
      .addEventListener('submit', e => {
        e.preventDefault();
        const data = {
          company:   e.target.company.value.trim(),
          rounds:    parseInt(e.target.rounds.value, 10),
          questions: e.target.questions.value
                        .split('\n')
                        .map(q => q.trim())
                        .filter(q => q)
        };
        console.log('Submitting report', data);
        alert('Report submitted!');
        window.location.href = 'browse-report.html';
      });
  </script>
</body>
</html>
